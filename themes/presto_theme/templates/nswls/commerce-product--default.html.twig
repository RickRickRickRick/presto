{#
/**
 * @file
 *
 * Default product template.
 *
 * Available variables:
 * - attributes: HTML attributes for the wrapper.
 * - product: The rendered product fields.
 *   Use 'product' to print them all, or print a subset such as
 *   'product.title'. Use the following code to exclude the
 *   printing of a given field:
 *   @code
 *   {{ product|without('title') }}
 *   @endcode
 * - product_entity: The product entity.
 * - product_url: The product URL.
 *
 * @ingroup themeable
 */
#}

{% set images = product_entity.field_images %}
{% set thumbnail = product_entity.field_thumbnail %}

{% set view_mode = product.title['#view_mode'] %}
<div class="hidden">
  {{ product.variations }}
</div>

{% if product.field_regular_price|render|striptags|trim != '' %}
  <a href="{{ product_url }}">
    <span class="onsale">On Sale!</span>
  </a>
{% endif %}

<div class="product-listing-wrapper">
  <div class="product-listing-action-wrapper">
    <div class="add-to-cart-wrapper">
      <a class="add-to-cart" data-action="cart">
        Add to Cart
      </a>
    </div>
    <div class="view-details-wrapper">
      <a href="{{ product_url }}" title="View details for {{ product.title|render|striptags|trim }}">
        View Details
      </a>
    </div>
    <div class="thumbnail-wrapper">
      {% if thumbnail.entity.fileuri %}
        <img alt="" class="img-responsive" src="{{ file_url(thumbnail.entity.fileuri) }}">
      {% else %}
        <img alt="" class="img-responsive" src="http://fillmurray.com/800/800">
      {% endif %}
    </div>
  </div>
  <div class="product-list-info-wrapper">
    <a href="{{ product_url }}">
      <h4>{{ product.title }}</h4>
      <span class="price">
        {% if product.field_regular_price|render|striptags|trim != '' %}
          <del class="amount">{{ product.field_regular_price|render|striptags|trim }}</del>
          <span class="amount">{{ product.variation_price|render|striptags|trim }}</span>
        {% else %}
          <span class="amount">{{ product.variation_price|render|striptags }}</span>
        {% endif %}
      </span>
    </a>
  </div>
</div>

{# <span class="product-thumb-info">
   <a class="add-to-cart-product" data-action="cart">
      <span class="fa fa-shopping-cart">Add to Cart</span>
  </a>
  <a href="{{ product_url }}">
    <span class="product-thumb-info-image">
      <span class="product-thumb-info-act">
        <span class="product-thumb-info-act-left">View <i class="fa fa-plus"></i> Details</span>
      </span>
      {% if thumbnail.entity.fileuri %}
        <img alt="" class="img-responsive" src="{{ file_url(thumbnail.entity.fileuri) }}">
      {% else %}
        <img alt="" class="img-responsive" src="http://fillmurray.com/800/800">
      {% endif %}
    </span>
  </a>
  <span class="product-thumb-info-content">
    <a href="{{ product_url }}">
      <h4>{{ product.title }}</h4>
      <span class="price">
        {% if product.field_regular_price|render|striptags|trim != '' %}
          <del><span class="amount">{{ product.field_regular_price|render|striptags|trim }}</span></del>
          <ins><span class="amount">{{ product.variation_price|render|striptags|trim }}</span></ins>
          {% else %}
          <span class="amount">{{ product.variation_price|render|striptags }}</span>
        {% endif %}
      </span>
    </a>
  </span>
</span> #}
